# 3장 - 24. 주석

보통 주석이 장황하게 달린 코드의 경우에는 코드를 잘못 작성 했기 때문인 경우가 많습니다. 실제로 리팩터링을 하고 난 후 상당량의 주석을 제거할 수 있습니다.

만약 주석을 작성해야 할 것 같다면 주석을 작성하기 보다는, 아래의 일을 먼저 해봅시다!

- 특정 코드 블록이 하는 일에 주석을 남기고 싶다면 **함수 추출하기**를 적용합시다.
- 만약 이미 추출되어 있는 함수임에도 주석이 필요하다면 **함수 선언 바꾸기**를 통해 함수 이름을 바꿔봅시다.
- 시스템이 동작하기 위한 선행조건을 작성하고 싶다면 **어서션 추가하기**(10.6)를 해봅시다.

### 어서션 추가하기(10.6)

어서션은 항상 참이라고 가정하는 조건부 문장입니다.

참이라고 가정하는 조건이 보이면 그 조건을 명시하는 어서션을 추가하면 됩니다.

참고로 어서션의 유무가 프로그램 기능의 정상 동작에 아무런 영향을 주지 않도록 작성되어야 합니다.

어서션은 주로 아래와 같은 상황에서 사용합니다.

- 오류 찾기
- 어떤 상태임을 가정한 채 실행되는지를 다른 개발자에게 알려주는 소통 도구
- 디버깅

어서션이 없는 코드 예제는 아래와 같습니다.

order.customer가 반드시 있다고 가정했지만 실제로는 undefined일 수 있습니다. 이러면 런타임에서 TypeError가 발생해 디버깅이 어려워집니다.

```jsx
function calculateDiscount(order) {
  // 고객이 반드시 있어야 한다는 가정이 있지만 코드에 드러나지 않음
  return order.customer.isVip ? order.amount * 0.9 : order.amount;
}

console.log(calculateDiscount({ amount: 100 })); // customer 속성이 없는 경우, 런타임에서 바로 TypeError 발생
```

어서션을 통해 리팩터링해보겠습니다.

이제 order.customer가 없을 때 명확한 에러 메세지를 던집니다. 그렇기에 개발자는 고객 정보가 없는데 할인 계산을 시도했다는 점을 바로 알 수 있습니다.

```jsx
function assert(condition, message) {
  if (!condition) {
    throw new Error(message || "Assertion failed");
  }
}

function calculateDiscount(order) {
  // 어서션을 추가하여 개발자가 의도한 가정이 명확해짐
  if (!order.custome) {
    throw new Error("order must have a customer");
  }

  return order.customer.isVip ? order.amount * 0.9 : order.amount;
}

console.log(calculateDiscount({ amount: 100 })); // ❌ order must have a customer
```

---

주석은 뭘 할지 모를때만 작성하는 것이 좋습니다.

예를 들어 현재 진행 상황, 확실하지 않은 부분, 코드를 지금처럼 작성한 이유 등…

하지만 이런 부분들은 PR의 코멘트로 작성해도 충분하다는 생각이 드네요 ㅎㅎ
